npx --no-install --version > /dev/null 2>&1 || exit 0

# Skip on VS Code UI initiated pushes to avoid intrusive popups
if [ -n "$VSCODE_GIT_IPC_HANDLE" ] || [ -n "$VSCODE_GIT_ASKPASS_NODE" ] || [ "$TERM_PROGRAM" = "vscode" ]; then
  exit 0
fi

# Typecheck before pushing (fast, no emit)
npx --no-install tsc --project tsconfig.typecheck.json --noEmit --pretty false || exit 1

